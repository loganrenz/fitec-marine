import{d as S,g as w,h as P,j as g,c as a,m as c,a as d,F as _,q as k,b as e,t as r,e as s,_ as M,f as C,r as x,k as B,p as R,s as A}from"./index-DCXSyeEi.js";const N={happy:{vibe:"Upbeat & Energetic",icon:"üòä",searchQuery:"upbeat energetic pop playlist",fallbackSongs:[{title:"Happy",artist:"Pharrell Williams",icon:"üéâ"},{title:"Walking on Sunshine",artist:"Katrina and the Waves",icon:"‚òÄÔ∏è"},{title:"Don't Stop Me Now",artist:"Queen",icon:"‚ö°"},{title:"Good as Hell",artist:"Lizzo",icon:"üí´"},{title:"Can't Stop the Feeling",artist:"Justin Timberlake",icon:"üéµ"}]},sad:{vibe:"Calm & Reflective",icon:"üò¢",searchQuery:"calm reflective melancholy playlist",fallbackSongs:[{title:"Someone Like You",artist:"Adele",icon:"üåßÔ∏è"},{title:"The Night We Met",artist:"Lord Huron",icon:"üåô"},{title:"Hurt",artist:"Johnny Cash",icon:"üíî"},{title:"Mad World",artist:"Gary Jules",icon:"üåä"},{title:"Skinny Love",artist:"Bon Iver",icon:"üçÇ"}]},angry:{vibe:"Intense & Powerful",icon:"üò†",searchQuery:"intense powerful rock metal playlist",fallbackSongs:[{title:"Break Stuff",artist:"Limp Bizkit",icon:"üî•"},{title:"Killing in the Name",artist:"Rage Against the Machine",icon:"‚ö°"},{title:"Bodies",artist:"Drowning Pool",icon:"üí•"},{title:"Last Resort",artist:"Papa Roach",icon:"üé∏"},{title:"Chop Suey!",artist:"System of a Down",icon:"ü§ò"}]},surprised:{vibe:"Unexpected & Fun",icon:"üò≤",searchQuery:"fun upbeat surprising pop playlist",fallbackSongs:[{title:"Uptown Funk",artist:"Mark Ronson ft. Bruno Mars",icon:"üé∫"},{title:"September",artist:"Earth, Wind & Fire",icon:"üéâ"},{title:"Mr. Blue Sky",artist:"Electric Light Orchestra",icon:"‚òÄÔ∏è"},{title:"Dynamite",artist:"BTS",icon:"üí•"},{title:"Levitating",artist:"Dua Lipa",icon:"‚ú®"}]},fearful:{vibe:"Soothing & Comforting",icon:"üò®",searchQuery:"soothing comforting chill ambient playlist",fallbackSongs:[{title:"Weightless",artist:"Marconi Union",icon:"üåä"},{title:"Breathe Me",artist:"Sia",icon:"üåô"},{title:"Fix You",artist:"Coldplay",icon:"‚≠ê"},{title:"Safe & Sound",artist:"Capital Cities",icon:"üè°"},{title:"The A Team",artist:"Ed Sheeran",icon:"üéµ"}]},disgusted:{vibe:"Alternative & Edgy",icon:"ü§¢",searchQuery:"alternative edgy grunge rock playlist",fallbackSongs:[{title:"Smells Like Teen Spirit",artist:"Nirvana",icon:"üé∏"},{title:"Bitter Sweet Symphony",artist:"The Verve",icon:"üéª"},{title:"Creep",artist:"Radiohead",icon:"üåë"},{title:"Seven Nation Army",artist:"The White Stripes",icon:"‚ö°"},{title:"Boulevard of Broken Dreams",artist:"Green Day",icon:"üõ£Ô∏è"}]},neutral:{vibe:"Chill & Easy Listening",icon:"üòê",searchQuery:"chill easy listening indie playlist",fallbackSongs:[{title:"Riptide",artist:"Vance Joy",icon:"üåä"},{title:"Budapest",artist:"George Ezra",icon:"üéµ"},{title:"Ho Hey",artist:"The Lumineers",icon:"üé∏"},{title:"Some Nights",artist:"fun.",icon:"üåô"},{title:"The Middle",artist:"Zedd, Maren Morris & Grey",icon:"‚ú®"}]},contempt:{vibe:"Dark & Brooding",icon:"üòí",searchQuery:"dark alternative indie moody playlist",fallbackSongs:[{title:"Hurt",artist:"Nine Inch Nails",icon:"üñ§"},{title:"Black",artist:"Pearl Jam",icon:"üåë"},{title:"Fake Plastic Trees",artist:"Radiohead",icon:"ü•Ä"},{title:"Where Is My Mind?",artist:"Pixies",icon:"üåä"},{title:"Karma Police",artist:"Radiohead",icon:"üöî"}]}},L={key:0,class:"space-y-4"},T={class:"flex items-center gap-4"},D=["src","alt"],E={class:"flex-1 min-w-0"},z={class:"font-semibold text-gray-800 truncate"},Q={key:0,class:"text-sm text-gray-500 truncate"},F=["onClick","aria-label"],W={key:0,class:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-xl",role:"status"},H={class:"text-sm font-medium"},I={key:1,class:"space-y-3"},V={class:"text-sm text-gray-600 italic mb-3"},K={class:"flex items-center gap-3"},U=["aria-label"],G={class:"flex-1 min-w-0"},J={class:"font-semibold text-gray-800 text-sm truncate"},Y={class:"text-xs text-gray-500 truncate"},j=["onClick","aria-label"],q=S({__name:"PlaylistResults",props:{emotionData:{}},setup(v){const n=w(),l=P(),u=g(()=>n.playlists.length>0);async function h(o){if(!n.isAuthorized){alert("Please authorize Apple Music to play playlists.");return}await l.playPlaylist(o)||alert(l.error.value||"Failed to play playlist. Please ensure you have an active Apple Music subscription.")}function m(o,i=200){return o?o.replace("{w}",i.toString()).replace("{h}",i.toString()):""}function p(o){const i=encodeURIComponent(`${o.title} ${o.artist}`);window.open(`https://music.apple.com/search?term=${i}`,"_blank")}return(o,i)=>(s(),a("div",null,[u.value&&c(n).isAuthorized?(s(),a("div",L,[(s(!0),a(_,null,k(c(n).playlists,t=>(s(),a("div",{key:t.id,class:"bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow"},[e("div",T,[t.attributes.artwork?(s(),a("img",{key:0,src:m(t.attributes.artwork.url,80),alt:t.attributes.name,class:"w-20 h-20 rounded-lg object-cover"},null,8,D)):d("",!0),e("div",E,[e("h4",z,r(t.attributes.name),1),t.attributes.curatorName?(s(),a("p",Q,r(t.attributes.curatorName),1)):d("",!0)]),e("button",{class:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white font-medium rounded-lg transition-colors flex-shrink-0",onClick:b=>h(t.id),"aria-label":`Play ${t.attributes.name}`}," ‚ñ∂Ô∏è Play ",8,F)])]))),128)),c(n).currentPlaylist&&c(n).isPlaying?(s(),a("div",W,[e("p",H," üéµ Now Playing: "+r(c(n).currentPlaylist.attributes.name),1)])):d("",!0)])):(s(),a("div",I,[e("p",V,r(c(n).isAuthorized?"No playlists found. Here are some recommended songs:":"Authorize Apple Music for personalized playback, or search these on Apple Music:"),1),(s(!0),a(_,null,k(v.emotionData.fallbackSongs,t=>(s(),a("div",{key:t.title,class:"bg-white rounded-xl p-3 shadow-sm hover:shadow-md transition-shadow"},[e("div",K,[e("div",{class:"text-2xl flex-shrink-0",role:"img","aria-label":t.icon},r(t.icon),9,U),e("div",G,[e("h4",J,r(t.title),1),e("p",Y,r(t.artist),1)]),e("button",{class:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium rounded-lg transition-colors flex-shrink-0",onClick:b=>p(t),"aria-label":`Search for ${t.title} by ${t.artist}`}," Search ",8,j)])]))),128))]))]))}}),O=M(q,[["__scopeId","data-v-3293a41f"]]),Z={class:"container-card"},X={key:0,class:"mb-8"},tt={class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-2xl p-8 text-center"},et=["aria-label"],it={class:"text-3xl font-bold mb-2"},at={class:"text-lg opacity-90"},st={key:1,class:"bg-gray-50 rounded-2xl p-6"},ot={class:"text-xl font-bold text-gray-800 mb-4"},nt={key:0,class:"text-center py-8"},rt={key:1},lt=S({__name:"ResultsView",setup(v){const n=R(),l=C(),u=w(),h=P(),m=x(!1),p=x(!1),o=g(()=>l.currentEmotion),i=g(()=>o.value?N[o.value.emotion]:null),t=g(()=>l.confidencePercent);B(async()=>{if(!o.value){n.push({name:"home"});return}i.value&&(h.isReady.value?await b():p.value=!0)});async function b(){if(i.value){m.value=!0;try{const y=await h.searchPlaylists(i.value.searchQuery,5);y.length>0&&u.isAuthorized&&await h.playRandomPlaylist(y)&&u.currentPlaylist&&console.log(`Playing ${u.currentPlaylist.attributes.name}!`)}catch(y){console.error("Search error:",y)}finally{m.value=!1,p.value=!0}}}function $(){l.clearEmotion(),u.clearPlaylists(),n.push({name:"home"})}return(y,f)=>(s(),a("div",Z,[o.value&&i.value?(s(),a("div",X,[e("div",tt,[e("div",{class:"text-7xl mb-4",role:"img","aria-label":`${o.value.emotion} emotion`},r(i.value.icon),9,et),e("h2",it,r(c(l).emotionLabel),1),e("p",at,r(t.value)+"% confidence",1)])])):d("",!0),i.value?(s(),a("div",st,[e("h3",ot," üéß Your "+r(i.value.vibe)+" Playlist ",1),m.value?(s(),a("div",nt,[...f[0]||(f[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-4 border-indigo-500 mx-auto mb-4"},null,-1),e("p",{class:"text-gray-600"},"Searching for the perfect music...",-1)])])):p.value?(s(),a("div",rt,[A(O,{"emotion-data":i.value},null,8,["emotion-data"])])):d("",!0)])):d("",!0),e("button",{class:"w-full mt-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-xl transition-colors",onClick:$,"aria-label":"Try again"}," ‚Üê Try Again ")]))}}),ut=M(lt,[["__scopeId","data-v-e9f694fd"]]);export{ut as default};
